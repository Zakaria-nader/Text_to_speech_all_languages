<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تحويل النص إلى صوت بسيط</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background: #222;
    color: #eee;
  }
  textarea {
    width: 100%;
    height: 150px;
    font-size: 18px;
    border-radius: 8px;
    padding: 10px;
  }
  select, button {
    padding: 10px;
    font-size: 16px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
  }
  button {
    background-color: #28a745;
    color: white;
    cursor: pointer;
    width: 100%;
  }
</style>
</head>
<body>

<h2>تحويل النص إلى صوت</h2>

<textarea id="text" placeholder="اكتب النص هنا..."></textarea>

<select id="voiceSelect"></select>

<button id="speakBtn">تشغيل الصوت</button>

<script>
  const synth = window.speechSynthesis;
  const textArea = document.getElementById('text');
  const voiceSelect = document.getElementById('voiceSelect');
  const speakBtn = document.getElementById('speakBtn');

  let voices = [];

  function populateVoices() {
    voices = synth.getVoices();
    voiceSelect.innerHTML = '';
    voices.forEach((voice, i) => {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = `${voice.name} (${voice.lang})`;
      voiceSelect.appendChild(option);
    });
    // اختار الصوت العربي الأول لو موجود
    const arabicIndex = voices.findIndex(v => v.lang.startsWith('ar'));
    if (arabicIndex >= 0) {
      voiceSelect.selectedIndex = arabicIndex;
    }
  }

  synth.onvoiceschanged = populateVoices;

  speakBtn.addEventListener('click', () => {
    const text = textArea.value.trim();
    if (!text) {
      alert('يرجى إدخال نص');
      return;
    }
    const utterThis = new SpeechSynthesisUtterance(text);
    const selectedVoice = voices[voiceSelect.value];
    if(selectedVoice) {
      utterThis.voice = selectedVoice;
      utterThis.lang = selectedVoice.lang;
    }
    synth.cancel();
    synth.speak(utterThis);
  });

  // تحميل الأصوات أول مرة
  populateVoices();
</script>

</body>
</html>
